<video
  id="video"
  phx-hook="video"
  poster={Routes.images_path(@socket, :index, series: @episode["series"]["id"], type: "background")}
  controlsList="nodownload"
  controls
  autoplay
>
  <source
    src={
      Routes.stream_episode_path(@socket, :show, @episode["id"],
        token: Phoenix.Token.sign(MediaServerWeb.Endpoint, "user auth", @current_user.id)
      ) <> "#{if assigns[:continue], do: "#t=#{@continue.current_time}"}"
    }
    type="video/mp4"
  />

  <%= if MediaServer.Subtitles.has_subtitle("#{ MediaServerWeb.Repositories.Episodes.get_root_path() }/#{ MediaServerWeb.Repositories.Episodes.get_season_path(@episode) }/#{ MediaServerWeb.Repositories.Episodes.get_folder_path(@episode) }", MediaServerWeb.Repositories.Episodes.get_file_path(@episode)) do %>
    <track
      kind="captions"
      label="Captions"
      src={
        Routes.subtitle_episode_path(@socket, :show, @episode["id"],
          token: Phoenix.Token.sign(MediaServerWeb.Endpoint, "user auth", @current_user.id)
        )
      }
      srclang="en"
    >
    </track>
  <% end %>
</video>
